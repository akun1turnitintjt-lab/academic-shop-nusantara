<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Joki Skripsi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="skripsi.css">
</head>
<body>

<div class="form-container">
    <h2>üìÑ Joki Skripsi</h2>

    <label>Nama *</label><br>
    <input type="text" id="nama"><br><br>

    <label>NIRM *</label><br>
    <input type="text" id="nirm"><br><br>

    <label>Program Studi *</label><br>
    <input type="text" id="prodi"><br><br>

    <label>Fakultas *</label><br>
    <input type="text" id="fakultas"><br><br>

    <label>Nama Kampus *</label><br>
    <input type="text" id="kampus"><br><br>

    <!-- CHECKBOX BAB -->
    <label>Bagian Skripsi yang Dikerjakan *</label><br>
    <label><input type="checkbox" name="bab" value="BAB I"> BAB I</label><br>
    <label><input type="checkbox" name="bab" value="BAB II"> BAB II</label><br>
    <label><input type="checkbox" name="bab" value="BAB III"> BAB III</label><br>
    <label><input type="checkbox" name="bab" value="BAB IV"> BAB IV</label><br>
    <label><input type="checkbox" name="bab" value="BAB V"> BAB V</label><br><br>

    <label>Judul Skripsi <small>(Opsional)</small></label><br>
    <input type="text" id="judul"><br><br>

    <label>Harga Skripsi</label><br>
    <input type="text" id="harga" value="" readonly><br><br>

    <label>Kode Voucher <small>(Opsional)</small></label><br>
    <input type="text" id="voucher" placeholder="Contoh: HEMAT10A"><br>
    <small>*Masukkan kode voucher jika tersedia</small><br><br>

    <button onclick="beliSekarang()">Beli Sekarang</button>
</div>

<script>
const hargaBab = {
    "BAB I": 350000,
    "BAB II": 500000,
    "BAB III": 350000,
    "BAB IV": 600000,
    "BAB V": 300000
};

// Update harga saat checkbox diklik
document.querySelectorAll('input[name="bab"]').forEach(cb => {
    cb.addEventListener("change", updateHarga);
});

function updateHarga() {
    let total = 0;

    document.querySelectorAll('input[name="bab"]:checked').forEach(item => {
        total += hargaBab[item.value];
    });

    document.getElementById("harga").value =
        total > 0 ? "Rp " + total.toLocaleString("id-ID") : "Rp 0";
}

function beliSekarang() {
    const nama = document.getElementById("nama").value.trim();
    const nirm = document.getElementById("nirm").value.trim();
    const prodi = document.getElementById("prodi").value.trim();
    const fakultas = document.getElementById("fakultas").value.trim();
    const kampus = document.getElementById("kampus").value.trim();
    const judul = document.getElementById("judul").value.trim() || "-";
    const voucherInput = document.getElementById("voucher").value.trim().toUpperCase();

    if (!nama || !nirm || !prodi || !fakultas || !kampus) {
        alert("‚ö†Ô∏è Mohon lengkapi semua data wajib.");
        return;
    }

    const babChecked = [];
    let hargaAwal = 0;

    document.querySelectorAll('input[name="bab"]:checked').forEach(item => {
        babChecked.push(item.value);
        hargaAwal += hargaBab[item.value];
    });

    if (babChecked.length === 0) {
        alert("‚ö†Ô∏è Pilih minimal satu BAB yang ingin dikerjakan.");
        return;
    }

    let diskon = 0;
    const voucher5 = [""];
    const voucher10 = ["FEBMERIA"];
    const voucher15 = [""];
    if (voucher5.includes(voucherInput)) diskon = 5;
    else if (voucher10.includes(voucherInput)) diskon = 10;
    else if (voucher15.includes(voucherInput)) diskon = 15;

    const potongan = hargaAwal * diskon / 100;
    const hargaAkhir = hargaAwal - potongan;

    const pesan = `
*JOKI SKRIPSI*
-----------------------
Nama: ${nama}
NIRM: ${nirm}
Program Studi: ${prodi}
Fakultas: ${fakultas}
Kampus: ${kampus}
Bagian Dikerjakan: ${babChecked.join(", ")}
Judul Skripsi: ${judul}
Voucher: ${voucherInput || "-"}
Diskon: ${diskon}%
Total Bayar: Rp ${hargaAkhir.toLocaleString("id-ID")}
-----------------------
Saya ingin lanjut pemesanan.
`;

    const nomorAdmin = "6288245742094";
    const url = "https://wa.me/" + nomorAdmin + "?text=" + encodeURIComponent(pesan);
    window.open(url, "_blank");
}
</script>

</body>
</html>
