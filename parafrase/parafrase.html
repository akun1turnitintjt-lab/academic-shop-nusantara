<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Joki Parafrase</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="parafrase.css">
</head>
<body>

<div class="form-container">
    <h2>üìÑ Joki Parafrase</h2>

    <label>Nama *</label>
    <input type="text" id="nama">

    <label>Jumlah Halaman *</label>
    <input type="number" id="halaman" oninput="hitungHarga()">

    <label>Skor Awal *</label>
    <input type="number" id="skora" oninput="hitungHarga()">

    <label>Skor Target *</label>
    <input type="number" id="skortar" oninput="hitungHarga()">

    <label>Harga Makalah</label>
    <input type="text" id="harga" value="" readonly>

    <label>Kode Voucher <small>(Opsional)</small></label>
    <input type="text" id="voucher" placeholder="Contoh: HEMAT10A">
    <div class="note">*Masukkan kode voucher jika tersedia</div>

    <button class="btn" onclick="beliSekarang()">Beli Sekarang</button>
</div>

<script>
function hitungHarga() {
    const halaman = parseInt(document.getElementById("halaman").value) || 0;
    const skora = parseInt(document.getElementById("skora").value) || 0;
    const skortar = parseInt(document.getElementById("skortar").value) || 0;

    if (halaman <= 0 || skora <= 0 || skortar <= 0 || skora < skortar) {
        document.getElementById("harga").value = "";
        return;
    }

    let hargaPerSkor = 0;

    if (halaman >= 1 && halaman <= 25) {
        hargaPerSkor = 5000;
    } else if (halaman >= 26 && halaman <= 50) {
        hargaPerSkor = 7000;
    } else if (halaman >= 51 && halaman <= 75) {
        hargaPerSkor = 10000;
    } else if (halaman >= 76 && halaman <= 100) {
        hargaPerSkor = 12000;
    } else if (halaman >= 101) {
        hargaPerSkor = 15000;
    }

    const skorSelisih = skora - skortar;
    const hargaTotal = hargaPerSkor * skorSelisih;

    document.getElementById("harga").value = "Rp " + hargaTotal.toLocaleString("id-ID");
}

function beliSekarang() {
    const nama = document.getElementById("nama").value.trim();
    const halaman = document.getElementById("halaman").value.trim();
    const skora = document.getElementById("skora").value.trim();
    const skortar = document.getElementById("skortar").value.trim();
    const harga = document.getElementById("harga").value.trim();
    const voucherInput = document.getElementById("voucher").value.trim().toUpperCase();

    if (!nama || !halaman || !skora || !skortar || !harga) {
        alert("‚ö†Ô∏è Mohon lengkapi semua data wajib terlebih dahulu dan pastikan skor awal lebih besar dari skor target.");
        return;
    }

    let diskon = 0;
    const voucher5 = [""];
    const voucher10 = ["FEBMERIA"];
    const voucher15 = [""];

    if (voucher5.includes(voucherInput)) {
        diskon = 5;
    } else if (voucher10.includes(voucherInput)) {
        diskon = 10;
    } else if (voucher15.includes(voucherInput)) {
        diskon = 15;
    }

    // Hapus "Rp " dan titik dari string harga agar bisa dihitung
    const hargaAngka = parseInt(harga.replace(/[^0-9]/g, ""));
    const potongan = hargaAngka * diskon / 100;
    const hargaAkhir = hargaAngka - potongan;

    const pesan = `
*JOKI PARAFRASE*
-----------------------
Nama: ${nama}
Jumlah Halaman: ${halaman}
Skor Awal: ${skora}
Skor Target: ${skortar}
Voucher: ${voucherInput || "-"}
Diskon: ${diskon}%
Total Bayar: Rp ${hargaAkhir.toLocaleString("id-ID")}
-----------------------
Saya ingin lanjut pemesanan.
    `;

    const nomorAdmin = "6288245742094";
    const url = "https://wa.me/" + nomorAdmin + "?text=" + encodeURIComponent(pesan);
    window.open(url, "_blank");
}
</script>

</body>
</html>
